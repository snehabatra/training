<!DOCTYPE  HTML>
<html>
    <head>
        <title>test</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Bootstrap -->
        <link href= "./bootstrap/css/bootstrap.min.css" type="text/css" rel="stylesheet" media="screen">

        <script src="./js/jquery.js"></script>
        <script src="./bootstrap/js/bootstrap.min.js"></script>
        <script type="text/javascript"  language="JavaScript">
                        console.log();
            var createStatement = "CREATE TABLE IF NOT EXISTS data(id integer primary key autoincrement, email TEXT,password TEXT,op1 TEXT,op2 TEXT,address TEXT,remember TEXT)";
            var selectAllStatement = "SELECT * FROM data";

            var insertStatement = "INSERT INTO data (email, password,op1,op2,address,remember) VALUES (?,?,?,?,?,?)";

            var updateStatement = "UPDATE data SET email = ?, password = ?, op1=?, op2=?, address=?, remember=? WHERE id=?";
            var deleteStatement = "DELETE FROM data WHERE id=?";
            var dropStatement = "DROP TABLE data";
            var dataset;

            var db = openDatabase('data', '1.0', 'sign up users',2 * 1024 * 1024);
            function createTable()
            {
            console.log();
            db.transaction(function(tx) {

            tx.executeSql('CREATE TABLE IF NOT EXISTS data(id integer primary key autoincrement, email, password,op1,op2,address,remember)');
            });
            }

            function onError(tx, error)
            {
            console.log(error);

            }

            function showRecords()
            {
            
            $("#res").html('')
                        
            db.transaction(function(tx) {

            tx.executeSql(selectAllStatement, [], function(tx, result) {

            dataset = result.rows;

            for (var i =0, item = null; i < dataset.length; i++) {

            item = dataset.item(i);
            var linkeditdelete = '<li>' + item['username'] + ' , ' + item['useremail'] + '    ' + '<a href="#" onclick="loadRecord(' + i + ');">edit</a>' + '    ' +

            '<a href="#" onclick="deleteRecord(' + item['id'] + ');">delete</a></li>';

            $("#results").append(linkeditdelete);
            }
            });
            });
            }

            function insertRecord() {
            var email1 = $("#email").val();
            var password1 = $("#password").val();
            var op11 = $("#op1").val();
            var op22 = $("#op2").val();
            var address1 = $("#address").val();
            var remember1 = $("#remember").val();

            db.transaction(function(tx) {
            tx.executeSql(insertStatement, [email1, password1, op11, op22, address1, remember1], loadAndReset(), onError());
            });
            }
            function loadRecord(i) {
            var item = dataset.item(i);
            $("#email").val((item['email']));
            $("#password").val((item['password']));
            $("#op1").val((item['op1']));
            $("#op2").val((item['op2']));
            $("#address").val((item['address']));
            $("#remember").val((item['remember']));
            $("#id").val((item['id']));
            }
            function updateRecord() {
            var uemail = $("#email").val();
            var upassword = $("#password").val();
            var uop1 = $("#op1").val();
            var uop2 =$("#op2").val();
            var uaddress = $("#address").val();
            var uremember = $("#remember").val();
            var useridupdate = $("#id").val();

            db.transaction(function (tx) {
            tx.executeSql(updateStatement, [uemail, upassword, uop1,uop2,uaddress,uremember,Number(useridupdate)], loadAndReset(), onError());
            });
            }
            function deleteRecord(id) {
            console.log(id);
            db.transaction(function(tx) {
            tx.executeSql(deleteStatement, [id], showRecords(), onError());
            alert("Delete Sucessfully");
            });Â 
            resetForm();
            }

            function dropTable(){
            db.transaction(function(tx){
            tx.executeSql(dropStatement, [], showRecords(), onError() ); });
            resetForm();
            }

            function loadAndReset() {
            resetForm();
            showRecords();
            }

            function resetForm() {
            $("#email").val("");
            $("#password").val("");
            $("#op1").val("");
            $("#op2").val("");
            $("#address").val("");
            $("#remember").val("");
            $("#id").val("");
            }

            $(document).ready(function () {

            createTable();

            $("#submitBut").click(insertRecord);

            $("#btnUp").click(updateRecord);

            $("#btnRe").click(resetForm);

            $("#btnDr").click(dropTable);
            $("#sh").click(showRecords);
            });

        </script>

    </head>
    <body>
        <legend>
            SIGN UP
        </legend>
        <form class="form-horizontal" id ="res">
            <div class="control-group">
                <label class="control-label" for="email">Email</label>
                <div class="controls">
                    <input type="text" id="email" placeholder="Email">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="password">Password</label>
                <div class="controls">
                    <input type="password" id="password" placeholder="Password">
                </div>
            </div>
            <div class ="control-group">
                <label class="control-label for="sex"">sex</label>
                <div class ="controls">
                    <label class="radio">
                        <input type="radio" name="opt1" id="op1"  >
                        Male </label>
                    <label class="radio">
                        <input type="radio" name="opt2" id="op2" >
                        Female </label>
                </div>
            </div>
            <div class="control-group">
                <label class ="control-label" for="address">Address</label>
                <div class="controls">
                    <input type ="textarea" textarea name ="address" rows="3" cols="4" placeholder="address " id ="address">
                    </textarea>
                </div>
            </div>
            <div class="control-group">
                <div class="controls">
                    <label class="checkbox">
                        <input type="checkbox" id="remember" checked="">
                        Remember me </label>
                </div>
            </div>
            <button id ="submitBut" type ="submit" class ="btn">
                Save and sign up
            </button>
            <button id ="btnRe" type ="submit" class ="btn">
                Reset
            </button>
            <button id ="btnUp" type ="submit" class ="btn">
                Update
            </button>
            <button id ="btnDr" type ="submit" class ="btn">
                Drop
            <button id ="sh" type ="submit " class ="btn">show rec</button>
            </button>
        </form>
    </body>
</html>
